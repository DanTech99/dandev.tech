---
import Sun from '@/icons/Sun.astro';
import Moon from '@/icons/Moon.astro';

interface Items {
  name: string;
  link: string;
  label: string;
}

const THEMES = ['Light', 'Dark', 'System'];

const items: Items[] = [
  {
    name: 'Experiencia',
    link: '/#experiencia',
    label: 'experiencia',
  },
  {
    name: 'Proyectos',
    link: '/#proyectos',
    label: 'proyectos',
  },
  {
    name: 'Habilidades',
    link: '/#habilidades',
    label: 'habilidades',
  },
  {
    name: 'Sobre mi',
    link: '/#sobre-mi',
    label: 'sobre-mi',
  },
];
---

<nav role="navigation" class="dark:text-white text-[#333333]">
  <ul
    role="list"
    class="flex flex-row gap-4 justify-center items-center border-2 md:border-none p-2 rounded-3xl">
    {
      items.map(({ name, link, label }) => (
        <li>
          <a
            href={link}
            class="text-base  dark:hover:text-yellow-200 hover:text-blue-600  font-medium"
            role="link"
            aria-label={label}>
            {name}
          </a>
        </li>
      ))
    }
    <li>
      <button
        role="button"
        aria-label="button para cambiar de tema"
        id="button">
        <Sun
          class="fill-[#333333] dark:fill-white hidden dark:block icon-theme"
          id="dark"
        />
        <Moon
          class="icon-theme fill-[#333333] dark:fill-white dark:hidden"
          id="light"
        />
      </button>
    </li>
  </ul>
</nav>

<script is:inline>
  const htmlElement = document.querySelector('html');
  const toggleButton = document.querySelector('#button');

  const applySavedTheme = () => {
    const savedTheme = localStorage.getItem('theme');
    if(savedTheme) {
      htmlElement.classList.toggle('dark', savedTheme === 'dark')
    }
  };

  // change theme
  const toggleTheme = () => {
    htmlElement.classList.toggle('dark');
    const isDarkMode = htmlElement.classList.contains('dark');
    localStorage.setItem('theme', isDarkMode ? 'dark' : 'light');
  };

  toggleButton.addEventListener('click', toggleTheme);

  applySavedTheme();
</script>
